<div class="flex flex-col justify-center items-center">
    <div class="mr-[50px] ml-[50px] mt-[45px] w-[900px]">
        <h1 class="flex justify-center w-full mb-[95px] text-[22px]">{{title}}</h1>
        <div class="border border-black border-opacity-40 rounded-[1.5rem] p-4 max-w-4xl shadow-md">
            <div class="flex justify-between gap-10 items-center mb-4">  
                <div class="flex flex-col">
                    <h1 class="text-xl font-bold ">{{type}}</h1>
                    <span class="text-sm text-[#B5B5C3]">{{Count}} {{type}}</span>
                </div>
                <form class="flex">
                    <input [(ngModel)]="searchTerm" (input)="filterItems()" class="px-4 py-1.5 border w-[25rem] border-gray-300 rounded-lg bg-gray-100 focus:bg-white focus:outline-none focus:ring-1 focus:ring-gray-400" type="text" placeholder="Search items.." name="searchTerm">
                </form>
                <div class="flex items-center relative">
                    <div class="dropdown ">
                        <label tabIndex="0" class="btn btn-sm no-animation border-opacity-60 hover:bg-white bg-white text-black font-semibold font-sans">
                            <span> Sort By:  {{currentFilter ? currentFilter : ''}} </span>
                            <svg class="h-7 w-5 text-black" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                            </svg>
                        </label>
                        <ul tabIndex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
                            <li *ngFor="let filter of filterBy">
                                <a (click)="sortTable(filter)">{{filter}}</a>             
                            </li>
                        </ul>
                    </div>
                    <button class="flex ml-3 w-[27.84px] h-[27px] p-1 rounded-md bg-[#14ae5c]">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="0.1" d="M12 3.76196C11.6821 3.76196 11.3643 3.70213 11.0659 3.58246C10.3824 3.30825 9.44765 3 8.7 3C7.74623 3 6.48805 3.50164 5.83514 3.79431C5.54597 3.92393 5.23384 3.99513 4.91731 4.01038C3.35289 4.0857 3 4.59602 3 6.39995V18.6C3 20.4039 3.35289 20.9142 4.91729 20.9896C5.23383 21.0048 5.54598 20.924 5.83516 20.7943C6.48807 20.5017 7.74624 20 8.7 20C9.44764 20 10.3823 20.3083 11.0659 20.5825C11.3642 20.7022 11.6821 20.762 12 20.762V3.76196Z" fill="#ffffff"></path> <path d="M3 6.39995C3 4.59602 3.35289 4.0857 4.91731 4.01038C5.23384 3.99513 5.54597 3.92393 5.83515 3.79431C6.48805 3.50164 7.74623 3 8.7 3C9.44765 3 10.3824 3.30825 11.0659 3.58246C11.6626 3.8218 12.3374 3.8218 12.9341 3.58246C13.6176 3.30825 14.5523 3 15.3 3C16.2538 3 17.512 3.50164 18.1649 3.79431C18.454 3.92393 18.7662 3.99513 19.0827 4.01038C20.6471 4.0857 21 4.59602 21 6.39995V18.6C21 20.4039 20.6471 20.9142 19.0827 20.9896C18.7662 21.0048 18.454 20.924 18.1648 20.7943C17.5119 20.5017 16.2538 20 15.3 20C14.5524 20 13.6177 20.3083 12.9341 20.5825C12.3374 20.8218 11.6626 20.8218 11.0659 20.5825C10.3823 20.3083 9.44764 20 8.7 20C7.74624 20 6.48807 20.5017 5.83516 20.7943C5.54598 20.924 5.23383 21.0048 4.91729 20.9896C3.35289 20.9142 3 20.4039 3 18.6V6.39995Z" stroke="#ffffff" stroke-width="2"></path> <path d="M12 4V20" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                    </button>
                </div>
            </div> 
            <div class="max-h-[300px] overflow-y-scroll">
                <table class="w-full">
                    <thead>
                        <tr class="text-left">
                            <th *ngFor="let header of header" class="px-4 py-2">{{header}}</th>
                            <th class="px-4 py-2">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container *ngFor="let item of filteredItems">
                            <tr class="border-t hover:bg-gray-200 cursor-pointer" (click)="onUserRowClick(item)">
                                <td class="px-4 py-2">{{item.Name}}</td>
                                <td class="px-4 py-2">{{item.ID}}</td>
                                <td class="px-4 py-2">
                                {{
                                    item.ISBN ? item.ISBN :
                                    item.groupMembers ? (item.groupMembers.slice(0, 2).join(', ') + (item.groupMembers.length > 2 ? '...' : '')): 
                                    item.Email ? item.Email : ""
                                }}
                                </td>
                                <td class="px-4 py-2">{{item.dateAdded}}</td>
                                <td class="px-4 py-2">
                                    <button (click)="openModal(item)" class="bg-[#F3F6F9] text-white font-bold p-1.5 rounded">
                                        <svg viewBox="0 0 1024 1024" width="20px" height="20px" xmlns="http://www.w3.org/2000/svg" fill="#ff0000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill="#ff0000" d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"></path></g>
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <app-user-details *ngIf="type === 'Users'"  [selectedUser]="selectedItem"> </app-user-details>
    <app-group-details *ngIf="type === 'Groups'" [selectedGroup]="selectedItem"> </app-group-details>
    <app-book-details *ngIf="type === 'Books'" [selectedBook]="selectedItem"> </app-book-details>
</div>
<!--Delete Modal-->
<div class="modal" id="delete-modal">
    <div *ngIf="selectedItem" class="modal-box flex flex-col justify-center items-center w-fit p-6">
        <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M12 14a1 1 0 0 1-1-1v-3a1 1 0 1 1 2 0v3a1 1 0 0 1-1 1zm-1.5 2.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0z" fill="#ff0000"></path><path d="M10.23 3.216c.75-1.425 2.79-1.425 3.54 0l8.343 15.852C22.814 20.4 21.85 22 20.343 22H3.657c-1.505 0-2.47-1.6-1.77-2.931L10.23 3.216zM20.344 20L12 4.147 3.656 20h16.688z" fill="#ff0000"></path></g></svg>
        <h3 class="font-bold text-lg mt-4">Are you sure you want to delete {{selectedItem.Name}} </h3>
        <p class="mt-1">Once deleted, you can't access {{selectedItem.Name}}. </p>
        <div class="modal-action gap-5">
            <a class="btn min-h-[2.5rem] h-[2.5rem] text-black bg-gray-200 border-none hover:bg-gray-200 w-[7rem] rounded-full" (click)="closeModal()">No</a>
            <a class="btn min-h-[2.5rem] h-[2.5rem] text-white bg-red-600 border-none hover:bg-red-600 w-[7rem] rounded-full" (click)="deleteItem()">Yes</a>
        </div>
    </div>
</div> 